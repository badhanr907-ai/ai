<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Debate Tool</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #343541;
    color: #f0f0f0;
    padding: 20px;
    line-height: 1.8;
    margin: 0;
  }
  h2 {
    text-align: center;
    color: #00ffff;
    margin-bottom: 25px;
    font-size: 26px;
  }
  input, button {
    padding: 14px;
    margin: 12px 0;
    width: 100%;
    border-radius: 12px;
    border: none;
    font-size: 18px;
    box-sizing: border-box;
  }
  input {
    background: #444654;
    color: #fff;
  }
  input::placeholder {
    color: #aaaaaa;
  }
  button {
    background: #10a37f;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
  }
  button:hover {
    opacity: 0.9;
  }
  #output {
    margin-top: 25px;
  }
  .ai-output {
    background: #444654;
    color: #f0f0f0;
    padding: 16px;
    margin: 16px 0;
    border-radius: 14px;
    font-size: 18px;
  }
  .final-answer {
    background: #0b805f;
    color: #fff;
    font-weight: bold;
    font-size: 20px;
  }
</style>
</head>
<body>

<h2>AI Debate Tool</h2>

<input type="text" id="nickname" placeholder="Enter your nickname e.g. Kakashi">
<input type="text" id="question" placeholder="Ask a question">
<button id="submit">Submit Question</button>

<div id="output"></div>

<script>
const ais = [
  {name: "GPT", apiKey: "YOUR_GPT_KEY_HERE", endpoint: "https://api.openai.com/v1/chat/completions"},
  {name: "Gemini", apiKey: "YOUR_GEMINI_KEY_HERE", endpoint: "YOUR_GEMINI_ENDPOINT_HERE"},
  {name: "Grok", apiKey: "YOUR_GROK_KEY_HERE", endpoint: "YOUR_GROK_ENDPOINT_HERE"},
  {name: "Perplexity", apiKey: "YOUR_PERPLEXITY_KEY_HERE", endpoint: "YOUR_PERPLEXITY_ENDPOINT_HERE"}
];

// Load nickname
const nicknameInput = document.getElementById("nickname");
const savedNick = localStorage.getItem("nickname");
if(savedNick) nicknameInput.value = savedNick;

nicknameInput.addEventListener("input", () => {
  localStorage.setItem("nickname", nicknameInput.value.trim());
});

// Function to simulate API call for now
async function callAI(ai, question) {
  // Example with GPT API; replace endpoint and headers for other AIs
  if(ai.name === "GPT") {
    const res = await fetch(ai.endpoint, {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${ai.apiKey}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: "gpt-4",
        messages: [{ role: "user", content: question }]
      })
    });
    const data = await res.json();
    return data.choices ? data.choices[0].message.content : "No answer";
  } else {
    // Simulate other AIs for now
    return `${ai.name} says: ${nicknameInput.value || "user"} would get answer for "${question}"`;
  }
}

async function debate(question) {
  const nickname = localStorage.getItem("nickname") || "user";
  const outputDiv = document.getElementById("output");
  outputDiv.innerHTML = "";

  // Step 1: Genre debate (simulated)
  const genreDiv = document.createElement("div");
  genreDiv.className = "ai-output";
  genreDiv.innerHTML = `<strong>Genre Debate:</strong> All AIs discuss and agree genre for the question "${question}" (simulated).`;
  outputDiv.appendChild(genreDiv);

  // Step 2: AI responses
  const responses = [];
  for(let ai of ais) {
    const ans = await callAI(ai, question);
    responses.push({ai: ai.name, text: ans});
  }

  // Display each AI response
  for(let r of responses) {
    const div = document.createElement("div");
    div.className = "ai-output";
    div.innerHTML = `<strong>${r.ai}:</strong> ${r.text}`;
    outputDiv.appendChild(div);
  }

  // Step 3: Final answer (random for now)
  const best = responses[Math.floor(Math.random() * responses.length)];
  const finalDiv = document.createElement("div");
  finalDiv.className = "ai-output final-answer";
  finalDiv.innerHTML = `<strong>Final Answer:</strong> ${best.ai}: ${best.text}`;
  outputDiv.appendChild(finalDiv);
}

document.getElementById("submit").addEventListener("click", async () => {
  const question = document.getElementById("question").value.trim();
  if(!question) return alert("Please enter a question!");
  await debate(question);
});
</script>

</body>
</html>
